version: "3"

services:
  nginx-proxy:
    image: nginx:latest
    restart: always
    ports:
      - "443:443"
      - "80:80"
    links:
      - deputy-server
    container_name: nginx-proxy
    volumes:
      - ./nginx.conf:/etc/nginx/conf.d/default.conf
      - /etc/letsencrypt/:/etc/letsencrypt/
    networks:
      - deputy
    dns:
      - '10.81.50.8'
      - '10.81.50.9'
  deputy-package-server-repository-combo:
    image: nexus.ex.c-lab.ee:8003/deputy-package-server-repository-combo:latest
    container_name: deputy-server
    environment:
      - RUST_LOG=debug
    networks:
      - deputy
    restart: unless-stopped
networks:
  deputy: {}
